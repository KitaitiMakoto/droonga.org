---
title: Droongaプラグイン開発チュートリアル
layout: ja
---

{% comment %}
##############################################
  THIS FILE IS AUTOMATICALLY GENERATED FROM
  "_po/ja/tutorial/plugin-development/index.po"
  DO NOT EDIT THIS FILE MANUALLY!
##############################################
{% endcomment %}


* TOC
{:toc}

## チュートリアルのゴール

Droongaプラグインの作り方を理解します。
[基本的な使い方のチュートリアル][basic tutorial]を完了している必要があります。


## プラグインとは

プラグインはDroongaの中でもっとも重要なコンセプトの一つです。
プラグインがDroongaを柔軟なものにしています。

多くの現実的なデータ処理タスクでは、問題に応じたデータの取り扱いが必要です。これを汎用の方法で解決するのは簡単ではありせん。

 * 外部のシステムと連携するために、入力のリクエスト形式を変更する必要があるかもしれません。外部のシステムが理解できるような形式で出力するために、出力を加工する必要があるかもしれません。
 * Droongaが標準で提供する機能よりもさらに複雑なデータ操作を、ストレージに直接アクセスしながら効率よく行う必要があるかもしれません。
 * Droongaのデータ分散と回収ロジックをコントロールすることで、Droongaの分散性能を活かした高度なアプリケーションを構築する必要があるかもしれません。

このような場合にプラグインを利用することができます。

## Droongaエンジンにおけるプラガブルな操作

Droonga Engineにはプラグイン可能なフェーズが大きく分けて2つあり、そのうちの1つは3つのサブフェーズから構成されます。プラグインの観点からすると、都合1つから4つの操作に処理を追加することができます。

Adaption phase
: このフェーズでは、プラグインは入力のリクエストと出力のレスポンスを加工できます。

Processing phase
: このフェーズでは、プラグインはそれぞれのパーティション上で入力のリクエストを逐次処理します。

processing phaseには3つのプラガブルなサブフェーズがあります:

Handling phase
: このフェーズでは、プラグインは低レベルのデータ処理、たとえばデータベース操作などを行うことができます。

Planning phase
: このフェーズでは、プラグインは入力のリクエストを複数のステップに分割できます。

Collection phase
: このフェーズでは、プラグインはステップから得られた結果をマージして一つの結果を生成できます。

上記の説明は、Droongaシステムの設計に基いているので、少々わかりづらいかもしれません。
ここでは、プラガブルな操作という観点から離れて、プラグインで何をしたいのかという観点から見てみましょう。

Adding a new command based on another existing command.
: For example, you possibly want to define a shorthand command wrapping the complex `search` command.
  *Adaption* of request and response messages makes it come true.

Adding a new command working around the storage.
: For example, you possibly want to modify data stored in the storage as you like.
  *Handling* of requests makes it come true.

Adding a new command for a complex task
: For example, you possibly want to implement a powerful command like the built-in `search` command.
  *Planning and collection* of requests make it come true.

In this tutorial, we focus on the adaption at first.
This is the most "basic" usecase of plugins, so it will help you to understand the overview of Droonga plugin development.
Then, we focus an other cases in this order.
Following this tutorial, you will learn how to write plugins.
This will be the first step to create plugins fit with your own requirements.

## プラグインを開発するには

For more details, let's read these sub tutorials:

 1. [Adapt requests and responses, to add a new command based on other existing commands][adapter].
 2. [Handle requests on all partitions, to add a new command working around the storage][handler].
 3. Handle requests only on a specific partition, to add a new command around the storage more smartly. (under construction)
 4. Distribute requests and collect responses, to add a new complex command based on sub tasks. (under construction)


  [basic tutorial]: ../basic/
  [overview]: ../../overview/
  [adapter]: ./adapter/
  [handler]: ./handler/
  [distribute-collect]: ./distribute-collect/
