msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

msgid ""
"---\n"
"title: \"Plugin: Handle requests\"\n"
"layout: en\n"
"---"
msgstr ""

msgid "!!! WORK IN PROGRESS !!!"
msgstr ""

msgid ""
"* TOC\n"
"{:toc}"
msgstr ""

msgid "## The goal of this tutorial"
msgstr "## チュートリアルのゴール"

msgid ""
"This tutorial aims to help you to learn how to develop plugins\n"
"which extends operations in handle phrase."
msgstr ""

msgid "## Precondition"
msgstr "## 前提条件"

msgid "* You must complete [Modify requests and responses tutorial][adapter]."
msgstr ""

msgid "## Handling phase"
msgstr ""

msgid ""
"The handling phase is the phase that the actual storage access is happen.\n"
"As Droonga is a distributed system, handler phase is done in multiple partitio"
"ns."
msgstr ""

msgid ""
"Here, in this tutorial, we are going to replace the handling phase of `search`"
" command for explanation. This breaks the `search` command. So this is not use"
"ful in practice, but it will help you to learn how Droonga works."
msgstr ""

msgid ""
"In practice, we need to *extend* Droonga. In this case, we need to add a new c"
"ommand which does not conflict with the existing commands. To do so, you need "
"to learn not only how to handle messages but also how to distribute messages t"
"o handlers and collect messages from them. Proceed to [Distribute requests and"
" collect responses][] after this tutorial completed."
msgstr ""

msgid "TODO fix the link to \"Distribute requests and collect responses\" tutorial"
msgstr ""

msgid "## Directory Structure"
msgstr ""

msgid ""
"The directory structure for plugins are in same rule as explained in [Modify r"
"equests and responses tutorial][adapter]."
msgstr ""

msgid ""
"Now let's create `sample-logger` plugin again. This will act almost same as [M"
"odify requests and responses tutorial][adapter] version, except the phase in w"
"hich the plugin works. We need to put `sample-logger.rb` to `lib/droonga/plugi"
"ns/sample-logger.rb`. The directory tree will be like this:"
msgstr ""

msgid ""
"~~~\n"
"lib\n"
"└── droonga\n"
"    └── plugins\n"
"            └── sample-logger.rb\n"
"~~~"
msgstr ""

msgid "## Create a plugin"
msgstr ""

msgid "Create a plugin as follows:"
msgstr ""

msgid "lib/droonga/plugins/sample-logger.rb:"
msgstr ""

msgid ""
"~~~ruby\n"
"require \"droonga/plugin\""
msgstr ""

msgid ""
"module Droonga\n"
"  module Plugins\n"
"    module SampleLoggerPlugin\n"
"      Plugin.registry.register(\"sample-logger\", self)"
msgstr ""

msgid ""
"      class Handler < Droonga::Handler\n"
"        message.type = \"search\""
msgstr ""

msgid ""
"        def handle(message, messenger)\n"
"          $log.info \"Droonga::Plugins::SampleLoggerPlugin\", :message => messag"
"e\n"
"        end\n"
"      end\n"
"    end\n"
"  end\n"
"end\n"
"~~~"
msgstr ""

msgid "## Activate the plugin with `catalog.json`"
msgstr ""

msgid ""
"Update catalog.json to activate this plugin. Add `\"sample-logger\"` to `\"plugin"
"s\"`."
msgstr ""

msgid ""
"~~~\n"
"(snip)\n"
"      \"datasets\": {\n"
"        \"Starbucks\": {\n"
"          (snip)\n"
"          \"plugins\": [\"sample-logger\", \"groonga\", \"crud\", \"search\"],\n"
"(snip)\n"
"~~~"
msgstr ""

msgid "## Run"
msgstr ""

msgid ""
"Let's get Droonga started. Note that you need to specify ./lib directory in RU"
"BYLIB environment variable in order to make ruby possible to find your plugin."
msgstr ""

msgid ""
"    # kill $(cat fluentd.pid)\n"
"    # RUBYLIB=./lib fluentd --config fluentd.conf --log fluentd.log --daemon f"
"luentd.pid"
msgstr ""

msgid "## Test"
msgstr ""

msgid ""
"Send a search request to Droonga Engine. Use `search-columbus.json` same as of"
" [Modify requests and responses tutorial][adapter]."
msgstr ""

msgid ""
"~~~\n"
"# droonga-request --tag starbucks search-columbus.json\n"
"~~~"
msgstr ""

msgid ""
"You will see no output for `droonga-request` execution because out `sample-log"
"ger` plugin traps the `add` request."
msgstr ""

msgid "Instead, you will see something like these lines in `fluentd.log`:"
msgstr ""

msgid ""
"~~~\n"
"2014-02-17 16:25:23 +0900 [info]: Droonga::Plugins::SampleLoggerPlugin message"
"=#<Droonga::HandlerMessage:0x007f9a7f0987a8 @raw={\"dataset\"=>\"Starbucks\", \"typ"
"e\"=>\"search\", \"body\"=>{\"id\"=>\"localhost:24224/starbucks.#0\", \"task\"=>{\"route\"="
">\"localhost:24224/starbucks.011\", \"step\"=>{\"command\"=>\"search\", \"dataset\"=>\"St"
"arbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"condition\"=>{\"qu"
"ery\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTime\", \"el"
"apsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"], \"limit\""
"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"replica\"=>\"ra"
"ndom\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/starbucks."
"011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendants\"=>{\"er"
"rors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/starbucks"
".#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"localhos"
"t:24224/starbucks\"], \"stores\"=>[\"localhost:24224/starbucks\"]}}, \"replyTo\"=>{\"t"
"ype\"=>\"search.result\", \"to\"=>\"127.0.0.1:50410/droonga\"}, \"id\"=>\"1392621923.903"
"868\", \"date\"=>\"2014-02-17 16:25:23 +0900\", \"appliedAdapters\"=>[\"Droonga::Plugi"
"ns::Error::Adapter\"]}, @body={\"id\"=>\"localhost:24224/starbucks.#0\", \"task\"=>{\""
"route\"=>\"localhost:24224/starbucks.011\", \"step\"=>{\"command\"=>\"search\", \"datase"
"t\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"condition"
"\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTim"
"e\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"], "
"\"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"replic"
"a\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/sta"
"rbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendants"
"\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/st"
"arbucks.#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"l"
"ocalhost:24224/starbucks\"], \"stores\"=>[\"localhost:24224/starbucks\"]}}, @task={"
"\"route\"=>\"localhost:24224/starbucks.011\", \"step\"=>{\"command\"=>\"search\", \"datas"
"et\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"conditio"
"n\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTi"
"me\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"],"
" \"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"repli"
"ca\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/st"
"arbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendant"
"s\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/s"
"tarbucks.#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, @step={\"command\"=>\"search\", "
"\"dataset\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"co"
"ndition\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"s"
"tartTime\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_"
"key\"], \"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], "
"\"replica\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24"
"224/starbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"desc"
"endants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:2"
"4224/starbucks.#0\"]}}>\n"
"2014-02-17 16:25:23 +0900 [info]: Droonga::Plugins::SampleLoggerPlugin message"
"=#<Droonga::HandlerMessage:0x007f9a7f060970 @raw={\"dataset\"=>\"Starbucks\", \"typ"
"e\"=>\"search\", \"body\"=>{\"id\"=>\"localhost:24224/starbucks.#0\", \"task\"=>{\"route\"="
">\"localhost:24224/starbucks.020\", \"step\"=>{\"command\"=>\"search\", \"dataset\"=>\"St"
"arbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"condition\"=>{\"qu"
"ery\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTime\", \"el"
"apsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"], \"limit\""
"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"replica\"=>\"ra"
"ndom\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/starbucks."
"011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendants\"=>{\"er"
"rors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/starbucks"
".#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"localhos"
"t:24224/starbucks\"], \"stores\"=>[\"localhost:24224/starbucks\"]}}, \"replyTo\"=>{\"t"
"ype\"=>\"search.result\", \"to\"=>\"127.0.0.1:50410/droonga\"}, \"id\"=>\"1392621923.903"
"868\", \"date\"=>\"2014-02-17 16:25:23 +0900\", \"appliedAdapters\"=>[\"Droonga::Plugi"
"ns::Error::Adapter\"]}, @body={\"id\"=>\"localhost:24224/starbucks.#0\", \"task\"=>{\""
"route\"=>\"localhost:24224/starbucks.020\", \"step\"=>{\"command\"=>\"search\", \"datase"
"t\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"condition"
"\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTim"
"e\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"], "
"\"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"replic"
"a\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/sta"
"rbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendants"
"\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/st"
"arbucks.#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"l"
"ocalhost:24224/starbucks\"], \"stores\"=>[\"localhost:24224/starbucks\"]}}, @task={"
"\"route\"=>\"localhost:24224/starbucks.020\", \"step\"=>{\"command\"=>\"search\", \"datas"
"et\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"conditio"
"n\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTi"
"me\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"],"
" \"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"repli"
"ca\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/st"
"arbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendant"
"s\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/s"
"tarbucks.#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, @step={\"command\"=>\"search\", "
"\"dataset\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"co"
"ndition\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"s"
"tartTime\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_"
"key\"], \"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], "
"\"replica\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24"
"224/starbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"desc"
"endants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:2"
"4224/starbucks.#0\"]}}>\n"
"2014-02-17 16:25:23 +0900 [info]: Droonga::Plugins::SampleLoggerPlugin message"
"=#<Droonga::HandlerMessage:0x007f9a7f069c50 @raw={\"dataset\"=>\"Starbucks\", \"typ"
"e\"=>\"search\", \"body\"=>{\"id\"=>\"localhost:24224/starbucks.#0\", \"task\"=>{\"route\"="
">\"localhost:24224/starbucks.001\", \"step\"=>{\"command\"=>\"search\", \"dataset\"=>\"St"
"arbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"condition\"=>{\"qu"
"ery\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTime\", \"el"
"apsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"], \"limit\""
"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"replica\"=>\"ra"
"ndom\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/starbucks."
"011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendants\"=>{\"er"
"rors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/starbucks"
".#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"localhos"
"t:24224/starbucks\"], \"stores\"=>[\"localhost:24224/starbucks\"]}}, \"replyTo\"=>{\"t"
"ype\"=>\"search.result\", \"to\"=>\"127.0.0.1:50410/droonga\"}, \"id\"=>\"1392621923.903"
"868\", \"date\"=>\"2014-02-17 16:25:23 +0900\", \"appliedAdapters\"=>[\"Droonga::Plugi"
"ns::Error::Adapter\"]}, @body={\"id\"=>\"localhost:24224/starbucks.#0\", \"task\"=>{\""
"route\"=>\"localhost:24224/starbucks.001\", \"step\"=>{\"command\"=>\"search\", \"datase"
"t\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"condition"
"\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTim"
"e\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"], "
"\"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"replic"
"a\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/sta"
"rbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendants"
"\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/st"
"arbucks.#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"l"
"ocalhost:24224/starbucks\"], \"stores\"=>[\"localhost:24224/starbucks\"]}}, @task={"
"\"route\"=>\"localhost:24224/starbucks.001\", \"step\"=>{\"command\"=>\"search\", \"datas"
"et\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"conditio"
"n\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"startTi"
"me\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_key\"],"
" \"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], \"repli"
"ca\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24224/st"
"arbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"descendant"
"s\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:24224/s"
"tarbucks.#0\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, @step={\"command\"=>\"search\", "
"\"dataset\"=>\"Starbucks\", \"body\"=>{\"queries\"=>{\"stores\"=>{\"source\"=>\"Store\", \"co"
"ndition\"=>{\"query\"=>\"Columbus\", \"matchTo\"=>\"_key\"}, \"output\"=>{\"elements\"=>[\"s"
"tartTime\", \"elapsedTime\", \"count\", \"attributes\", \"records\"], \"attributes\"=>[\"_"
"key\"], \"limit\"=>-1}}}}, \"type\"=>\"broadcast\", \"outputs\"=>[\"errors\", \"stores\"], "
"\"replica\"=>\"random\", \"routes\"=>[\"localhost:24224/starbucks.001\", \"localhost:24"
"224/starbucks.011\", \"localhost:24224/starbucks.020\"], \"n_of_expects\"=>0, \"desc"
"endants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#0\"], \"stores\"=>[\"localhost:2"
"4224/starbucks.#0\"]}}>\n"
"~~~"
msgstr ""

msgid "Note that three lines are shown for only one request. What is happening?"
msgstr ""

msgid ""
"Remember that we have configured `Starbucks` dataset to use three partitions ("
"and each has two replicas) in `catalog.json` of [the basic tutorial][basic]."
msgstr ""

msgid ""
"The `search` request is dispatched to three partitions and passed into handlin"
"g phase for each partition. That is because we saw three lines for one request"
"."
msgstr ""

msgid ""
"The messages shown is in internal format, which is transformed from the reques"
"t you've sent.\n"
"You can see your search request is distributed to partitions `localhost:24224/"
"starbucks.001`, `localhost:24224/starbucks.011` and `localhost:24224/starbucks"
".020` from `\"routes\"`."
msgstr ""

msgid ""
"In `search` case, it is enough to use one replica per one partition because re"
"plicas for a partition are expected to have the exactly same contents.\n"
"So the planner ordered distributor to choose one replica randomly."
msgstr ""

msgid "## Trap \"add\" command"
msgstr ""

msgid ""
"We have seen how distributed search is done from the view point of handling ph"
"ase so far.\n"
"How about `\"add\"` command?"
msgstr ""

msgid "Update `smaple-logger` plugin to trap `\"add\"` message instead of `\"search\"`."
msgstr ""

msgid ""
"~~~\n"
"require \"droonga/plugin\""
msgstr ""

msgid ""
"      class Handler < Droonga::Handler\n"
"        message.type = \"add\" # This was \"search\" in the previous version."
msgstr ""

msgid "Restart `fluentd`:"
msgstr ""

msgid ""
"~~~\n"
"# kill $(cat fluentd.pid)\n"
"# RUBYLIB=./lib fluentd --config fluentd.conf --log fluentd.log --daemon fluen"
"td.pid\n"
"~~~"
msgstr ""

msgid ""
"Let's send a request to Droonga Engine.\n"
"Here, we use the first line of `stores.json`."
msgstr ""

msgid "add-store.json:"
msgstr ""

msgid ""
"~~~\n"
"{\"dataset\":\"Starbucks\",\"type\":\"add\",\"body\":{\"table\":\"Store\",\"key\":\"1st Avenue "
"& 75th St. - New York NY  (W)\",\"values\":{\"location\":\"40.770262,-73.954798\"}}}\n"
"~~~"
msgstr ""

msgid "Send it to the engine:"
msgstr ""

msgid ""
"~~~\n"
"# droonga-request --tag starbucks add-store.json\n"
"~~~"
msgstr ""

msgid "Instead, you will see results like this in `fluentd.log`:"
msgstr ""

msgid ""
"~~~\n"
"2014-02-17 16:29:18 +0900 [info]: Droonga::Plugins::SampleLoggerPlugin message"
"=#<Droonga::HandlerMessage:0x007f7f6a66c4c0 @raw={\"dataset\"=>\"Starbucks\", \"typ"
"e\"=>\"add\", \"body\"=>{\"id\"=>\"localhost:24224/starbucks.#2\", \"task\"=>{\"route\"=>\"l"
"ocalhost:24224/starbucks.000\", \"step\"=>{\"command\"=>\"add\", \"dataset\"=>\"Starbuck"
"s\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\"1st Avenue & 75th St. - New York NY  (W"
")\", \"values\"=>{\"location\"=>\"40.770262,-73.954798\"}}, \"key\"=>\"1st Avenue & 75th"
" St. - New York NY  (W)\", \"type\"=>\"scatter\", \"outputs\"=>[\"errors\", \"success\"],"
" \"replica\"=>\"all\", \"post\"=>true, \"routes\"=>[\"localhost:24224/starbucks.000\", \""
"localhost:24224/starbucks.001\"], \"n_of_expects\"=>0, \"descendants\"=>{\"errors\"=>"
"[\"localhost:24224/starbucks.#2\"], \"success\"=>[\"localhost:24224/starbucks.#2\"]}"
"}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"localhost:2422"
"4/starbucks\"], \"success\"=>[\"localhost:24224/starbucks\"]}}, \"replyTo\"=>{\"type\"="
">\"add.result\", \"to\"=>\"127.0.0.1:50480/droonga\"}, \"id\"=>\"1392622158.374441\", \"d"
"ate\"=>\"2014-02-17 16:29:18 +0900\", \"appliedAdapters\"=>[\"Droonga::Plugins::CRUD"
"::Adapter\", \"Droonga::Plugins::Error::Adapter\"]}, @body={\"id\"=>\"localhost:2422"
"4/starbucks.#2\", \"task\"=>{\"route\"=>\"localhost:24224/starbucks.000\", \"step\"=>{\""
"command\"=>\"add\", \"dataset\"=>\"Starbucks\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\"1s"
"t Avenue & 75th St. - New York NY  (W)\", \"values\"=>{\"location\"=>\"40.770262,-73"
".954798\"}}, \"key\"=>\"1st Avenue & 75th St. - New York NY  (W)\", \"type\"=>\"scatte"
"r\", \"outputs\"=>[\"errors\", \"success\"], \"replica\"=>\"all\", \"post\"=>true, \"routes\""
"=>[\"localhost:24224/starbucks.000\", \"localhost:24224/starbucks.001\"], \"n_of_ex"
"pects\"=>0, \"descendants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#2\"], \"succes"
"s\"=>[\"localhost:24224/starbucks.#2\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"desc"
"endants\"=>{\"errors\"=>[\"localhost:24224/starbucks\"], \"success\"=>[\"localhost:242"
"24/starbucks\"]}}, @task={\"route\"=>\"localhost:24224/starbucks.000\", \"step\"=>{\"c"
"ommand\"=>\"add\", \"dataset\"=>\"Starbucks\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\"1st"
" Avenue & 75th St. - New York NY  (W)\", \"values\"=>{\"location\"=>\"40.770262,-73."
"954798\"}}, \"key\"=>\"1st Avenue & 75th St. - New York NY  (W)\", \"type\"=>\"scatter"
"\", \"outputs\"=>[\"errors\", \"success\"], \"replica\"=>\"all\", \"post\"=>true, \"routes\"="
">[\"localhost:24224/starbucks.000\", \"localhost:24224/starbucks.001\"], \"n_of_exp"
"ects\"=>0, \"descendants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#2\"], \"success"
"\"=>[\"localhost:24224/starbucks.#2\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, @step="
"{\"command\"=>\"add\", \"dataset\"=>\"Starbucks\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\""
"1st Avenue & 75th St. - New York NY  (W)\", \"values\"=>{\"location\"=>\"40.770262,-"
"73.954798\"}}, \"key\"=>\"1st Avenue & 75th St. - New York NY  (W)\", \"type\"=>\"scat"
"ter\", \"outputs\"=>[\"errors\", \"success\"], \"replica\"=>\"all\", \"post\"=>true, \"route"
"s\"=>[\"localhost:24224/starbucks.000\", \"localhost:24224/starbucks.001\"], \"n_of_"
"expects\"=>0, \"descendants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#2\"], \"succ"
"ess\"=>[\"localhost:24224/starbucks.#2\"]}}>\n"
"2014-02-17 16:29:18 +0900 [info]: Droonga::Plugins::SampleLoggerPlugin message"
"=#<Droonga::HandlerMessage:0x007f7f6a65ff40 @raw={\"dataset\"=>\"Starbucks\", \"typ"
"e\"=>\"add\", \"body\"=>{\"id\"=>\"localhost:24224/starbucks.#2\", \"task\"=>{\"route\"=>\"l"
"ocalhost:24224/starbucks.001\", \"step\"=>{\"command\"=>\"add\", \"dataset\"=>\"Starbuck"
"s\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\"1st Avenue & 75th St. - New York NY  (W"
")\", \"values\"=>{\"location\"=>\"40.770262,-73.954798\"}}, \"key\"=>\"1st Avenue & 75th"
" St. - New York NY  (W)\", \"type\"=>\"scatter\", \"outputs\"=>[\"errors\", \"success\"],"
" \"replica\"=>\"all\", \"post\"=>true, \"routes\"=>[\"localhost:24224/starbucks.000\", \""
"localhost:24224/starbucks.001\"], \"n_of_expects\"=>0, \"descendants\"=>{\"errors\"=>"
"[\"localhost:24224/starbucks.#2\"], \"success\"=>[\"localhost:24224/starbucks.#2\"]}"
"}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"descendants\"=>{\"errors\"=>[\"localhost:2422"
"4/starbucks\"], \"success\"=>[\"localhost:24224/starbucks\"]}}, \"replyTo\"=>{\"type\"="
">\"add.result\", \"to\"=>\"127.0.0.1:50480/droonga\"}, \"id\"=>\"1392622158.374441\", \"d"
"ate\"=>\"2014-02-17 16:29:18 +0900\", \"appliedAdapters\"=>[\"Droonga::Plugins::CRUD"
"::Adapter\", \"Droonga::Plugins::Error::Adapter\"]}, @body={\"id\"=>\"localhost:2422"
"4/starbucks.#2\", \"task\"=>{\"route\"=>\"localhost:24224/starbucks.001\", \"step\"=>{\""
"command\"=>\"add\", \"dataset\"=>\"Starbucks\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\"1s"
"t Avenue & 75th St. - New York NY  (W)\", \"values\"=>{\"location\"=>\"40.770262,-73"
".954798\"}}, \"key\"=>\"1st Avenue & 75th St. - New York NY  (W)\", \"type\"=>\"scatte"
"r\", \"outputs\"=>[\"errors\", \"success\"], \"replica\"=>\"all\", \"post\"=>true, \"routes\""
"=>[\"localhost:24224/starbucks.000\", \"localhost:24224/starbucks.001\"], \"n_of_ex"
"pects\"=>0, \"descendants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#2\"], \"succes"
"s\"=>[\"localhost:24224/starbucks.#2\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, \"desc"
"endants\"=>{\"errors\"=>[\"localhost:24224/starbucks\"], \"success\"=>[\"localhost:242"
"24/starbucks\"]}}, @task={\"route\"=>\"localhost:24224/starbucks.001\", \"step\"=>{\"c"
"ommand\"=>\"add\", \"dataset\"=>\"Starbucks\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\"1st"
" Avenue & 75th St. - New York NY  (W)\", \"values\"=>{\"location\"=>\"40.770262,-73."
"954798\"}}, \"key\"=>\"1st Avenue & 75th St. - New York NY  (W)\", \"type\"=>\"scatter"
"\", \"outputs\"=>[\"errors\", \"success\"], \"replica\"=>\"all\", \"post\"=>true, \"routes\"="
">[\"localhost:24224/starbucks.000\", \"localhost:24224/starbucks.001\"], \"n_of_exp"
"ects\"=>0, \"descendants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#2\"], \"success"
"\"=>[\"localhost:24224/starbucks.#2\"]}}, \"n_of_inputs\"=>0, \"values\"=>{}}, @step="
"{\"command\"=>\"add\", \"dataset\"=>\"Starbucks\", \"body\"=>{\"table\"=>\"Store\", \"key\"=>\""
"1st Avenue & 75th St. - New York NY  (W)\", \"values\"=>{\"location\"=>\"40.770262,-"
"73.954798\"}}, \"key\"=>\"1st Avenue & 75th St. - New York NY  (W)\", \"type\"=>\"scat"
"ter\", \"outputs\"=>[\"errors\", \"success\"], \"replica\"=>\"all\", \"post\"=>true, \"route"
"s\"=>[\"localhost:24224/starbucks.000\", \"localhost:24224/starbucks.001\"], \"n_of_"
"expects\"=>0, \"descendants\"=>{\"errors\"=>[\"localhost:24224/starbucks.#2\"], \"succ"
"ess\"=>[\"localhost:24224/starbucks.#2\"]}}>\n"
"~~~"
msgstr ""

msgid ""
"In `add` case, two log lines are shown for one request. This is because we hav"
"e configured to have two replicas for each partition."
msgstr ""

msgid ""
"In order to be consistent, `add` command must reach all of the replicas of the"
" partition, but not the other partitions.\n"
"As a consequence, `localhost:24224/starbucks.000` and `localhost:24224/starbuc"
"ks.001` are chosen."
msgstr ""

msgid "## Conclusion"
msgstr "## まとめ"

msgid "We have learned how to create plugins work in handling phrase."
msgstr ""

msgid ""
"  [adapter]: ../adapter\n"
"  [basic]: ../basic"
msgstr ""
