msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"PO-Revision-Date: 2014-03-05 12:52+0900\n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

msgid ""
"---\n"
"title: \"Droonga tutorial: How to migrate from Groonga?\"\n"
"layout: en\n"
"---"
msgstr ""
"---\n"
"title: \"Droongaチュートリアル: Groongaからの移行手順\"\n"
"layout: ja\n"
"---"

msgid ""
"* TOC\n"
"{:toc}"
msgstr ""

msgid "## The goal of this tutorial"
msgstr "## チュートリアルのゴール"

msgid ""
"Learning steps to run a Droonga cluster by your hand, and use it as a [Groonga"
"][groonga] compatible server."
msgstr "Droongaクラスタを自分で構築して、[Groonga][groonga]互換のサーバとして利用できるようにするための手順を学ぶこと。"

msgid "## Precondition"
msgstr "## 前提条件"

msgid ""
"* You must have basic knowledge and experiences to set up and operate an [Ubun"
"tu][] Server.\n"
"* You must have basic knowledge and experiences to use the [Groonga][groonga] "
"via HTTP."
msgstr ""
"* [Ubuntu][]サーバのセットアップと操作について、基本的な知識と経験があること。\n"
"* [Groonga][groonga]のHTTP経由での利用について、基本的な知識と経験があること。"

msgid "## What's Droonga?"
msgstr "## Droongaとは何か？"

msgid ""
"It is a data processing engine based on a distributed architecture, named afte"
"r the terms \"distributed-Groonga\".\n"
"As its name suggests, it can work as a Groonga compatible server with some imp"
"rovements - replication and sharding."
msgstr ""
"Droongaは分散アーキテクチャに基づくデータ処理エンジンで、「distributed-Groonga」がその名の由来です。\n"
"名前が示す通り、Droongaはいくつかの点での改善（具体的には、レプリケーションとシャーディング）を含んだGroonga互換のサーバとして動作することがで"
"きます。"

msgid ""
"In a certain sense, the Droonga is quite different from Groonga, about its arc"
"hitecture, design, API etc.\n"
"However, you don't have to understand the whole architecture of the Droonga, i"
"f you simply use it just as a Groonga compatible server."
msgstr ""
"アーキテクチャ、設計、APIなどの点で、DroongaはGroongaと大きく異なっています。\n"
"しかしながら、Droongaを単にGroonga互換のサーバとして使う限りにおいては、Droongaのアーキテクチャ全体を理解する必要はありません。"

msgid ""
"For example, let's try to build a database system to find [Starbucks stores in"
" New York](http://geocommons.com/overlays/430038)."
msgstr ""
"例として、[ニューヨークにあるスターバックスの店舗](http://geocommons.com/overlays/430038)を検索できるデータベースシ"
"ステムを作成することにします。"

msgid "## Set up a Droonga cluster"
msgstr "## Droongaクラスタをセットアップする"

msgid "### Prepare an environment for experiments"
msgstr "### 実験用の環境を準備する"

msgid ""
"Prepare a computer at first.\n"
"This tutorial describes steps to set up a Droonga cluster based on existing co"
"mputers.\n"
"Following instructions are basically written for a successfully prepared virtu"
"al machine of the `Ubuntu 13.10 x64` on the service [DigitalOcean](https://www"
".digitalocean.com/), with an available console."
msgstr ""

msgid ""
"NOTE: Make sure to use instances with >= 2GB memory equipped, at least during "
"installation of required packages for Droonga.\n"
"Otherwise, you may experience a strange build error."
msgstr ""

msgid "You need to prepare two or more computers for effective replication."
msgstr ""

msgid "### Steps to install Droonga components"
msgstr ""

msgid ""
"Groonga provides binary packages and you can install Groonga easily, for some "
"environments.\n"
"(See: [how to install Groonga](http://groonga.org/docs/install.html))"
msgstr ""

msgid ""
"However, currently there is no such an easy way to set up a database system ba"
"sed on Droonga.\n"
"We are planning to provide a better way (like a chef cookbook), but for now, y"
"ou have to set up it by your hand."
msgstr ""

msgid ""
"A database system based on the Droonga is called *Droonga cluster*.\n"
"A Droonga cluster is constructed from multiple computers, called *Droonga node"
"*.\n"
"So you have to set up multiple Droonga nodes for your Droonga cluster."
msgstr ""

msgid "Assume that you have two computers: `192.168.0.10` and `192.168.0.11`."
msgstr ""

msgid " 1. Install required platform packages, *on each computer*."
msgstr ""

msgid ""
"        # apt-get update\n"
"        # apt-get -y upgrade\n"
"        # apt-get install -y ruby ruby-dev build-essential nodejs npm"
msgstr ""

msgid ""
" 2. Install a gem package `droonga-engine`, *on each computer*.\n"
"    It is the core component provides most features of Droonga system."
msgstr ""

msgid "        # gem install droonga-engine"
msgstr ""

msgid ""
" 3. Install an npm package `droonga-http-server`, *on each computer*.\n"
"    It is the frontend component required to translate HTTP requests to Droong"
"a's native one."
msgstr ""

msgid "        # npm install -g droonga-http-server"
msgstr ""

msgid ""
" 4. Prepare a configuration directory for a Droonga node, *on each computer*.\n"
"    All physical databases are placed under this directory."
msgstr ""

msgid ""
"        # mkdir ~/droonga\n"
"        # cd ~/droonga"
msgstr ""

msgid ""
" 5. Create a `catalog.json`, *on one of Droonga nodes*.\n"
"    The file defines the structure of your Droonga cluster.\n"
"    You'll specify the name of the dataset via the `--dataset` option and the "
"list of your Droonga node's IP addresses via the `--hosts` option, like:"
msgstr ""

msgid ""
"        # droonga-catalog-generate --dataset=Starbucks \\\n"
"                                   --hosts=192.168.0.10,192.168.0.11 \\\n"
"                                   --output=./catalog.json"
msgstr ""

msgid ""
"    If you have only one computer and trying to set up it just for testing, th"
"en you'll do:"
msgstr ""

msgid ""
"        # droonga-catalog-generate --dataset=Starbucks \\\n"
"                                   --hosts=127.0.0.1 \\\n"
"                                   --output=./catalog.json"
msgstr ""

msgid " 6. Share the generated `catalog.json` *to your all Droonga nodes*."
msgstr ""

msgid "        # scp ~/droonga/catalog.json 192.169.0.11:~/droonga/"
msgstr ""

msgid ""
"    (Or, of course, you can generate same `catalog.json` on each computer, ins"
"tead of copying.)"
msgstr ""

msgid ""
"All Droonga nodes for your Droonga cluster are prepared by steps described abo"
"ve.\n"
"Let's continue to the next step."
msgstr ""

msgid "## Use the Droonga cluster, via HTTP"
msgstr ""

msgid "### Start and stop services on each Droonga node"
msgstr ""

msgid "You can run Groonga as an HTTP server with the option `-d`, like:"
msgstr ""

msgid "    # groonga -p 3000 -d --protocol http /tmp/databases/db"
msgstr ""

msgid ""
"On the other hand, you have to run two servers for each Droonga node to use yo"
"ur Droonga cluster via HTTP."
msgstr ""

msgid "To start them, run commands like following on each Droonga node:"
msgstr ""

msgid ""
"    # cd ~/droonga\n"
"    # droonga-engine --host=192.168.0.10 \\\n"
"                     --daemon \\\n"
"                     --pid-file $PWD/droonga-engine.pid\n"
"    # droonga-http-server --port=3000 \\\n"
"                          --receive-host-name=192.168.0.10 \\\n"
"                          --droonga-engine-host-name=192.168.0.10 \\\n"
"                          --default-dataset=Starbucks \\\n"
"                          --daemon \\\n"
"                          --pid-file $PWD/droonga-http-server.pid"
msgstr ""

msgid ""
"Note that you have to specify the host name of the Droonga node itself via som"
"e options.\n"
"It will be used to communicate with other Droonga nodes in the cluster.\n"
"So you have to specify different host name on another Droonga node, like:"
msgstr ""

msgid ""
"    # cd ~/droonga\n"
"    # droonga-engine --host=192.168.0.11 \\\n"
"    ..."
msgstr ""

msgid "To stop services, run commands like following on each Droonga node:"
msgstr ""

msgid ""
"    # kill $(cat ~/droonga/droonga-engine.pid)\n"
"    # kill $(cat ~/droonga/droonga-http-server.pid)"
msgstr ""

msgid "### Create a table"
msgstr ""

msgid "Now your Droonga cluster actually works as a Groonga's HTTP server."
msgstr ""

msgid ""
"Requests are completely same to ones for a Groonga server.\n"
"To create a new table `Store`, you just have to send a GET request for the `ta"
"ble_create` command, like:"
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/table_create?name=Store&type=Hash&key_t"
"ype=ShortText\"\n"
"    [[0,1398662266.3853862,0.08530688285827637],true]"
msgstr ""

msgid ""
"Note that you have to specify the host, one of Droonga nodes with active droon"
"ga-http-server, in your Droonga cluster.\n"
"In other words, you can use any favorite node in the cluster as an endpoint.\n"
"All requests will be distributed to suitable nodes in the cluster."
msgstr ""

msgid ""
"OK, now the table has been created successfully.\n"
"Let's see it by the `table_list` command:"
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/table_list\"\n"
"    [[0,1398662423.509928,0.003869295120239258],[[[\"id\",\"UInt32\"],[\"name\",\"Sho"
"rtText\"],[\"path\",\"ShortText\"],[\"flags\",\"ShortText\"],[\"domain\",\"ShortText\"],[\"r"
"ange\",\"ShortText\"],[\"default_tokenizer\",\"ShortText\"],[\"normalizer\",\"ShortText\""
"]],[256,\"Store\",\"/home/username/groonga/droonga-engine/000/db.0000100\",\"TABLE_"
"HASH_KEY|PERSISTENT\",\"ShortText\",null,null,null]]]"
msgstr ""

msgid "Because it is a cluster, another endpoint returns same result."
msgstr ""

msgid ""
"    # curl \"http://192.168.0.11:3000/d/table_list\"\n"
"    [[0,1398662423.509928,0.003869295120239258],[[[\"id\",\"UInt32\"],[\"name\",\"Sho"
"rtText\"],[\"path\",\"ShortText\"],[\"flags\",\"ShortText\"],[\"domain\",\"ShortText\"],[\"r"
"ange\",\"ShortText\"],[\"default_tokenizer\",\"ShortText\"],[\"normalizer\",\"ShortText\""
"]],[256,\"Store\",\"/home/username/groonga/droonga-engine/000/db.0000100\",\"TABLE_"
"HASH_KEY|PERSISTENT\",\"ShortText\",null,null,null]]]"
msgstr ""

msgid "### Create a column"
msgstr ""

msgid ""
"Next, create a new column `location` to the `Store` table by the `column_creat"
"e` command, like:"
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/column_create?table=Store&name=location"
"&flags=COLUMN_SCALAR&type=WGS84GeoPoint\"\n"
"    [[0,1398664305.8856306,0.00026226043701171875],true]"
msgstr ""

msgid ""
"Then verify that the column is correctly created, by the `column_list` command"
":"
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/column_list?table=Store\"\n"
"    [[0,1398664345.9680889,0.0011739730834960938],[[[\"id\",\"UInt32\"],[\"name\",\"S"
"hortText\"],[\"path\",\"ShortText\"],[\"type\",\"ShortText\"],[\"flags\",\"ShortText\"],[\"d"
"omain\",\"ShortText\"],[\"range\",\"ShortText\"],[\"source\",\"ShortText\"]],[257,\"locati"
"on\",\"/home/username/groonga/droonga-engine/000/db.0000101\",\"fix\",\"COLUMN_SCALA"
"R\",\"Store\",\"WGS84GeoPoint\",[]]]]"
msgstr ""

msgid "### Create indexes"
msgstr ""

msgid "Create indexes also."
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/table_create?name=Location&type=Patrici"
"aTrie&key_type=WGS84GeoPoint\"\n"
"    [[0,1398664401.4927232,0.12011909484863281],true]\n"
"    # curl \"http://192.168.0.10:3000/d/column_create?table=Location&name=store"
"&flags=COLUMN_INDEX&type=Store&source=location\"\n"
"    [[0,1398664429.5348525,0.13435077667236328],true]\n"
"    # curl \"http://192.168.0.10:3000/d/table_create?name=Term&type=PatriciaTri"
"e&key_type=ShortText&default_tokenizer=TokenBigram&normalizer=NormalizerAuto\"\n"
"    [[0,1398664454.446939,0.14734888076782227],true]\n"
"    # curl \"http://192.168.0.10:3000/d/column_create?table=Term&name=store__ke"
"y&flags=COLUMN_INDEX|WITH_POSITION&type=Store&source=_key\"\n"
"    [[0,1398664474.7112074,0.12619781494140625],true]"
msgstr ""

msgid "### Load data to a table"
msgstr ""

msgid ""
"Let's load data to the `Store` table.\n"
"First. prepare the data as a JSON file `stores.json`."
msgstr ""

msgid "stores.json:"
msgstr ""

msgid ""
"~~~\n"
"[\n"
"[\"_key\",\"location\"],\n"
"[\"1st Avenue & 75th St. - New York NY  (W)\",\"40.770262,-73.954798\"],\n"
"[\"76th & Second - New York NY  (W)\",\"40.771056,-73.956757\"],\n"
"[\"2nd Ave. & 9th Street - New York NY\",\"40.729445,-73.987471\"],\n"
"[\"15th & Third - New York NY  (W)\",\"40.733946,-73.9867\"],\n"
"[\"41st and Broadway - New York NY  (W)\",\"40.755111,-73.986225\"],\n"
"[\"84th & Third Ave - New York NY  (W)\",\"40.777485,-73.954979\"],\n"
"[\"150 E. 42nd Street - New York NY  (W)\",\"40.750784,-73.975582\"],\n"
"[\"West 43rd and Broadway - New York NY  (W)\",\"40.756197,-73.985624\"],\n"
"[\"Macy's 35th Street Balcony - New York NY\",\"40.750703,-73.989787\"],\n"
"[\"Macy's 6th Floor - Herald Square - New York NY  (W)\",\"40.750703,-73.989787\"]"
",\n"
"[\"Herald Square- Macy's - New York NY\",\"40.750703,-73.989787\"],\n"
"[\"Macy's 5th Floor - Herald Square - New York NY  (W)\",\"40.750703,-73.989787\"]"
",\n"
"[\"80th & York - New York NY  (W)\",\"40.772204,-73.949862\"],\n"
"[\"Columbus @ 67th - New York NY  (W)\",\"40.774009,-73.981472\"],\n"
"[\"45th & Broadway - New York NY  (W)\",\"40.75766,-73.985719\"],\n"
"[\"Marriott Marquis - Lobby - New York NY\",\"40.759123,-73.984927\"],\n"
"[\"Second @ 81st - New York NY  (W)\",\"40.77466,-73.954447\"],\n"
"[\"52nd & Seventh - New York NY  (W)\",\"40.761829,-73.981141\"],\n"
"[\"1585 Broadway (47th) - New York NY  (W)\",\"40.759806,-73.985066\"],\n"
"[\"85th & First - New York NY  (W)\",\"40.776101,-73.949971\"],\n"
"[\"92nd & 3rd - New York NY  (W)\",\"40.782606,-73.951235\"],\n"
"[\"165 Broadway - 1 Liberty - New York NY  (W)\",\"40.709727,-74.011395\"],\n"
"[\"1656 Broadway - New York NY  (W)\",\"40.762434,-73.983364\"],\n"
"[\"54th & Broadway - New York NY  (W)\",\"40.764275,-73.982361\"],\n"
"[\"Limited Brands-NYC - New York NY\",\"40.765219,-73.982025\"],\n"
"[\"19th & 8th - New York NY  (W)\",\"40.743218,-74.000605\"],\n"
"[\"60th & Broadway-II - New York NY  (W)\",\"40.769196,-73.982576\"],\n"
"[\"63rd & Broadway - New York NY  (W)\",\"40.771376,-73.982709\"],\n"
"[\"195 Broadway - New York NY  (W)\",\"40.710703,-74.009485\"],\n"
"[\"2 Broadway - New York NY  (W)\",\"40.704538,-74.01324\"],\n"
"[\"2 Columbus Ave. - New York NY  (W)\",\"40.769262,-73.984764\"],\n"
"[\"NY Plaza - New York NY  (W)\",\"40.702802,-74.012784\"],\n"
"[\"36th and Madison - New York NY  (W)\",\"40.748917,-73.982683\"],\n"
"[\"125th St. btwn Adam Clayton & FDB - New York NY\",\"40.808952,-73.948229\"],\n"
"[\"70th & Broadway - New York NY  (W)\",\"40.777463,-73.982237\"],\n"
"[\"2138 Broadway - New York NY  (W)\",\"40.781078,-73.981167\"],\n"
"[\"118th & Frederick Douglas Blvd. - New York NY  (W)\",\"40.806176,-73.954109\"],"
"\n"
"[\"42nd & Second - New York NY  (W)\",\"40.750069,-73.973393\"],\n"
"[\"Broadway @ 81st - New York NY  (W)\",\"40.784972,-73.978987\"],\n"
"[\"Fashion Inst of Technology - New York NY\",\"40.746948,-73.994557\"]\n"
"]\n"
"~~~"
msgstr ""

msgid "Then, send it as a POST request of the `load` command, like:"
msgstr ""

msgid ""
"    # curl --data \"@stores.json\" \"http://192.168.0.10:3000/d/load?table=Store\""
"\n"
"    [[0,1398666180.023,0.069],[40]]"
msgstr ""

msgid "Now all data in the JSON file are successfully loaded."
msgstr ""

msgid "### Select data from a table"
msgstr ""

msgid "OK, all data is now ready."
msgstr ""

msgid "As the starter, let's select initial ten records with the `select` command:"
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/select?table=Store&output_columns=_key&"
"limit=10\"\n"
"    [[0,1398666260.887927,0.000017404556274414062],[[[40],[[\"_key\",\"ShortText\""
"]],[[\"1st Avenue & 75th St. - New York NY  (W)\"],[\"2nd Ave. & 9th Street - New"
" York NY\"],[\"76th & Second - New York NY  (W)\"],[\"15th & Third - New York NY  "
"(W)\"],[\"41st and Broadway - New York NY  (W)\"],[\"West 43rd and Broadway - New "
"York NY  (W)\"],[\"84th & Third Ave - New York NY  (W)\"],[\"150 E. 42nd Street - "
"New York NY  (W)\"],[\"Macy's 35th Street Balcony - New York NY\"],[\"Herald Squar"
"e- Macy's - New York NY\"]]]]]"
msgstr ""

msgid "Of course you can specify conditions via the `query` option:"
msgstr ""

msgid ""
"    # curl \"http://192.168.0.10:3000/d/select?table=Store&query=Columbus&match"
"_columns=_key&output_columns=_key&limit=10\"\n"
"    [[0,1398670157.661574,0.0012705326080322266],[[[2],[[\"_key\",\"ShortText\"]],"
"[[\"Columbus @ 67th - New York NY  (W)\"],[\"2 Columbus Ave. - New York NY  (W)\"]"
"]]]]\n"
"    # curl \"http://192.168.0.10:3000/d/select?table=Store&filter=_key@'Ave'&ou"
"tput_columns=_key&limit=10\"\n"
"    [[0,1398670586.193325,0.0003848075866699219],[[[3],[[\"_key\",\"ShortText\"]],"
"[[\"2nd Ave. & 9th Street - New York NY\"],[\"84th & Third Ave - New York NY  (W)"
"\"],[\"2 Columbus Ave. - New York NY  (W)\"]]]]]"
msgstr ""

msgid "## Conclusion"
msgstr "## まとめ"

msgid ""
"In this tutorial, you did set up a [Droonga][] cluster on [Ubuntu Linux][Ubunt"
"u] computers.\n"
"Moreover, you load data to it and select data from it successfully, as a [Groo"
"nga][] compatible server."
msgstr ""

msgid ""
"Currently, Droonga supports only some limited features of Groonga compatible c"
"ommands.\n"
"See the [command reference][] for more details."
msgstr ""

msgid ""
"  [Ubuntu]: http://www.ubuntu.com/\n"
"  [Droonga]: https://droonga.org/\n"
"  [Groonga]: http://groonga.org/\n"
"  [command reference]: ../../reference/commands/"
msgstr ""
