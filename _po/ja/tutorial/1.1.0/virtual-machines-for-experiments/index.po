msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"PO-Revision-Date: 2014-11-30 23:19+0900\n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

msgid ""
"---\n"
"title: \"Droonga tutorial: How to prepare virtual machines for experiments?\"\n"
"layout: en\n"
"---"
msgstr ""

msgid ""
"* TOC\n"
"{:toc}"
msgstr ""

msgid "## The goal of this tutorial"
msgstr ""

msgid "Learning steps to prepare multiple (three) virtual machines for experiments."
msgstr ""

msgid "## Why virtual machines?"
msgstr ""

msgid ""
"Because Droonga is a distributed data processing system, you have to prepare m"
"ultiple computers to construct a cluster.\n"
"For safety (and good performance) you should use dedicated computers for Droon"
"ga nodes."
msgstr ""

msgid ""
"You need two or more computers for effective replication.\n"
"If you are trying to manage node structure of your cluster effectively, three "
"or more computers are required."
msgstr ""

msgid ""
"However, it may cost money that using multiple server instances on virtual pri"
"vate server services, even if you just want to do testing or development.\n"
"So we recommend you to use private virtual machines on your own PC for such ca"
"ses."
msgstr ""

msgid ""
"Luckly, there is a useful software [Vagrant][] to manage virtual machines easi"
"ly.\n"
"This tutorial describes *how to prepare three virtual machines* by Vagrant."
msgstr ""

msgid "## Prepare a host machine"
msgstr ""

msgid ""
"First, you have to prepare a PC as the host of VMs.\n"
"Because each VM possibly requires much size RAM for building of native extensi"
"ons, the host machine should have much more RAM - hopefully, 8GB or larger."
msgstr ""

msgid ""
"In most cases you don't have to prepare much size RAM for each VM because ther"
"e are pre-built binaries for major platforms.\n"
"However, if your VM is running with a minor distribution or an edge version, t"
"here may be no binary package for your platform. Then it will be compiled auto"
"matically, requiring 2GB RAM.\n"
"If you see any strange error while building native extensions, enlarge the siz"
"e of RAM of each VM and try installation again.\n"
"(See also the [appendix of this tutorial](#less-size-memory).)"
msgstr ""

msgid "## Steps to prepare VMs"
msgstr ""

msgid "### Install the VirtualBox"
msgstr ""

msgid ""
"The Vagrant requires a backend to run VMs, so you have to install the most rec"
"ommended one: [VirtualBox][].\n"
"For example, if you use an [Ubuntu][] PC, it can be installed via the `apt` co"
"mmand, like:"
msgstr ""

msgid ""
"~~~\n"
"$ sudo apt-get install virtualbox\n"
"~~~"
msgstr ""

msgid ""
"Otherwise go to the [VirtualBox web site][VirtualBox] and install it as instru"
"cted."
msgstr ""

msgid "### Install the Vagrant"
msgstr ""

msgid ""
"Next, install [Vagrant][].\n"
"Go to the [Vagrant web site][Vagrant] and install it as instructed.\n"
"For example, if you use an Ubuntu PC (x64):"
msgstr ""

msgid ""
"~~~\n"
"$ wget https://dl.bintray.com/mitchellh/vagrant/vagrant_1.6.5_x86_64.deb\n"
"$ sudo dpkg -i vagrant_1.6.5_x86_64.deb\n"
"~~~"
msgstr ""

msgid ""
"NOTE: You can install Vagrant via `apt-get install vagrant` on Ubuntu 14.04, b"
"ut don't use it because the version is too old to import boxes from [Vagrant C"
"loud][]."
msgstr ""

msgid "### Determine a box and prepare a Vagrantfile"
msgstr ""

msgid ""
"Go to the [Vagrant Cloud][] and find a box for your experiments.\n"
"For example, if you use a [box for Ubuntu Trusty (x64)](https://vagrantcloud.c"
"om/ubuntu/boxes/trusty64), you just have to do:"
msgstr ""

msgid ""
"~~~\n"
"$ mkdir droonga-ubuntu-trusty\n"
"$ cd droonga-ubuntu-trusty\n"
"$ vagrant init ubuntu/trusty64\n"
"~~~"
msgstr ""

msgid ""
"Then a file `Vagrantfile` is automatically generated there.\n"
"However you should rewrite it completely for experiments of Droonga cluster, l"
"ike following:"
msgstr ""

msgid "`Vagrantfile`:"
msgstr ""

msgid ""
"~~~\n"
"n_machines = 3\n"
"box        = \"ubuntu/trusty64\""
msgstr ""

msgid ""
"VAGRANTFILE_API_VERSION = \"2\"\n"
"Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n"
"  n_machines.times do |index|\n"
"    config.vm.define :\"node#{index}\" do |node_config|\n"
"      node_config.vm.box = box\n"
"      node_config.vm.network(:private_network,\n"
"                             :ip => \"192.168.100.#{50 + index}\")\n"
"      node_config.vm.host_name = \"node#{index}\"\n"
"      node_config.vm.provider(\"virtualbox\") do |virtual_box|\n"
"        virtual_box.memory = 2048\n"
"      end\n"
"    end\n"
"  end\n"
"end\n"
"~~~"
msgstr ""

msgid ""
"Note, this `Vagrantfile` defines three VMs with 2GB (2048MB) RAM for each.\n"
"So your host machine must have 6GB or more RAM.\n"
"If your machine has less RAM, set the size to `512` (meaning 512MB) for now."
msgstr ""

msgid "### Start virtual machines"
msgstr ""

msgid "To start VMs, you just run the command `vagrant up`:"
msgstr ""

msgid ""
"~~~\n"
"$ vagrant up\n"
"Bringing machine 'node0' up with 'virtualbox' provider...\n"
"Bringing machine 'node1' up with 'virtualbox' provider...\n"
"Bringing machine 'node2' up with 'virtualbox' provider...\n"
"...\n"
"~~~"
msgstr ""

msgid ""
"Then Vagrant automatically downloads VM image from the [Vagrant Cloud][] web s"
"ite and starts VMs.\n"
"After preparation processes, there are three running VMs with IP address in a "
"virtual private network: `192.168.100.50`, `192.168.100.51`, and `192.168.100."
"52`."
msgstr ""

msgid ""
"Let's confirm that they are correctly working.\n"
"You can log in those VMs by the command `vagrant ssh`, like:"
msgstr ""

msgid ""
"~~~\n"
"$ vagrant ssh node0\n"
"Welcome to Ubuntu 14.04.1 LTS (GNU/Linux 3.13.0-36-generic x86_64)\n"
"...\n"
"vagrant@node0:~$ exit\n"
"~~~"
msgstr ""

msgid "### Register your VMs to your SSH client"
msgstr ""

msgid ""
"You have to use `vagrant ssh` instead of regular `ssh`, to log in VMs.\n"
"Moreover you have to `cd` to the `Vagrantfile`'s directory before running the "
"command.\n"
"It is annoying a little."
msgstr ""

msgid "So, let's register VMs to your local config file of the SSH client, like:"
msgstr ""

msgid ""
"~~~\n"
"$ vagrant ssh-config node0 >> ~/.ssh/config\n"
"$ vagrant ssh-config node1 >> ~/.ssh/config\n"
"$ vagrant ssh-config node2 >> ~/.ssh/config\n"
"~~~"
msgstr ""

msgid ""
"After that you can log in to your VMs from the host computer by their name, wi"
"thout `vagrant ssh` command:"
msgstr ""

msgid ""
"~~~\n"
"$ ssh node0\n"
"~~~"
msgstr ""

msgid "### Configure your VMs to access each other by their host name"
msgstr ""

msgid ""
"Because there is no name server, each VM cannot resolve host names of others.\n"
"So you have to type their raw IP addresses for now.\n"
"It's very annoying."
msgstr ""

msgid "So, let's modify hosts file on VMs, like:"
msgstr ""

msgid "`/etc/hosts`:"
msgstr ""

msgid ""
"~~~\n"
"127.0.0.1 localhost\n"
"192.168.100.50 node0\n"
"192.168.100.51 node1\n"
"192.168.100.52 node2\n"
"~~~"
msgstr ""

msgid "After that your VMs can communicate with each other by their host name."
msgstr ""

msgid "### Shutdown VMs"
msgstr ""

msgid "You can shutdown all VMs by the command `vagrant halt`:"
msgstr ""

msgid ""
"~~~\n"
"$ vagrant halt\n"
"~~~"
msgstr ""

msgid "Then Vagrant shuts down all VMs completely."
msgstr ""

msgid "### Cleanup VMs"
msgstr ""

msgid ""
"If you want to clear all changes in VMs, then simply run the command `vagrant "
"destroy -f`:"
msgstr ""

msgid ""
"~~~\n"
"$ vagrant destroy -f\n"
"$ vagrant up\n"
"~~~"
msgstr ""

msgid ""
"Then all changes will go away and you can start fresh VMs again.\n"
"This will help you to improve installation scripts or something."
msgstr ""

msgid "### Appendix: if your host machine has less size RAM... {#less-size-memory}"
msgstr ""

msgid "Even if your computer has less size RAM, you don't have to give up."
msgstr ""

msgid ""
"2GB RAM for each virtual machine is required just for building native extensio"
"ns of [Rroonga][].\n"
"In other words, Droonga nodes can work with less size RAM, if there are existi"
"ng (already built) binary libraries."
msgstr ""

msgid "So you can install Droonga services for each VM step by step, like:"
msgstr ""

msgid ""
" 1. Shutdown all VMs by `vagrant halt`.\n"
" 2. Open the VirtualBox console by `virtualbox`.\n"
" 3. Go to `properties` of a VM, and enlarge the size of RAM to 2GB (2048MB).\n"
" 4. Start the VM, from the VirtualBox console.\n"
" 5. Log in to the VM and install Droonga services.\n"
" 6. Shutdown the VM.\n"
" 7. Go to `properties` of the VM, and decrease the size of RAM to the original"
" size.\n"
" 8. Repeat steps from 3 to 7 for each VM."
msgstr ""

msgid "### Appendix: direct access to services running on a VM, from other computers"
msgstr ""

msgid ""
"If the host machine is just a (remote) server and you are mainly using another"
" local PC, then you may hope to access HTTP servers running on VMs from your P"
"C directly.\n"
"For example, testing the administration page on an web browser (Google Chrome,"
" Mozilla Firefox, and so on.)"
msgstr ""

msgid ""
"Port forwarding of OpenSSH will help you.\n"
"Let's run following command on your host machine."
msgstr ""

msgid ""
"~~~\n"
"% ssh vagrant@192.168.100.50 \\\n"
"      -i ~/.vagrant.d/insecure_private_key \\\n"
"      -g \\\n"
"      -L 20041:localhost:10041\n"
"~~~"
msgstr ""

msgid ""
"Then, actually you can see the administraton page provided by `droonga-http-se"
"rver` on the VM `node0` (`192.168.100.50`), with the URL:\n"
"`http://(IP address of hostname of the host machine):20041/`\n"
"OpenSSH client running on the host machine automatically forwards inpouring pa"
"ckets from the host machine's port `20041` to the VM's port `10041`."
msgstr ""

msgid ""
" * Don't forget to specify the username `vagrant@` and the identity file.\n"
" * The option `-g` is required to accept requests from outside of the host com"
"puter itself."
msgstr ""

msgid "## Conclusion"
msgstr ""

msgid "In this tutorial, you did prepare three virtual machines for Droonga nodes."
msgstr ""

msgid ""
"You can try [the \"getting started\" tutorial](../groonga/) and others with mult"
"iple nodes."
msgstr ""

msgid ""
"  [Vagrant]: https://www.vagrantup.com/\n"
"  [Vagrant Cloud]: https://vagrantcloud.com/\n"
"  [VirtualBox]: https://www.virtualbox.org/\n"
"  [Groonga]: http://groonga.org/\n"
"  [Rroonga]: https://github.com/ranguba/rroonga\n"
"  [Ubuntu]: http://www.ubuntu.com/\n"
"  [Droonga]: https://droonga.org/\n"
"  [Groonga]: http://groonga.org/"
msgstr ""
